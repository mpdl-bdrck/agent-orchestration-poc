# PNP-004: Create public/notifications.js with DOM Observer

**Status**: ðŸ”´ To Do  
**Phase**: Phase 1 - Frontend Assets (The Overlay)  
**Priority**: High  
**Assignee**: TBD

---

## Description

Create JavaScript file that implements the DOM Bridge: observes DOM for hidden messages, parses JSON, and renders cards.

## Acceptance Criteria

- [ ] File `public/notifications.js` exists
- [ ] Implements panel injection on DOMContentLoaded
- [ ] Creates `#custom-notification-panel` element if it doesn't exist
- [ ] Implements MutationObserver to watch for new messages
- [ ] Detects messages with "__NOTIFY__" signature
- [ ] Hides detected messages (sets display: none)
- [ ] Extracts JSON from code blocks or markdown body
- [ ] Parses JSON safely (try/catch)
- [ ] Calls renderCard() function with parsed data
- [ ] Observes chat container or body element
- [ ] Starts observing after DOM is ready (2s delay)

## Related Files

- `public/notifications.js` (to be created)

## Dependencies

- PNP-001 (Panel container styling)

## Notes

This is the core of the DOM Bridge architecture. See implementation plan section "2. Frontend: JavaScript DOM Observer" and consultant's plan for complete implementation.
