# PNP-007: Update handlers.py with background_monitor() Function

**Status**: ðŸ”´ To Do  
**Phase**: Phase 2 - Background Monitor Integration  
**Priority**: High  
**Assignee**: TBD

---

## Description

Add the `background_monitor()` async function to `handlers.py` that continuously monitors for alerts and pushes them to the notification panel.

## Acceptance Criteria

- [ ] Function `background_monitor()` exists in `src/interface/chainlit/handlers.py`
- [ ] Waits 5 seconds for UI initialization before starting
- [ ] Loads `NotificationLoader` singleton
- [ ] Gets settings from JSON (mode, interval, max_alerts)
- [ ] Supports streaming mode: gets next alert, pushes to panel, waits interval
- [ ] Supports static mode: loads all alerts once, waits 5 minutes
- [ ] Supports replay mode: uses delay_seconds from each alert
- [ ] Handles errors gracefully (waits 60s on error)
- [ ] Logs alert push events for debugging
- [ ] Checks if panel exists before updating
- [ ] Continues running even if individual alerts fail

## Related Files

- `src/interface/chainlit/handlers.py` (update existing file)

## Dependencies

- PNP-003 (NotificationLoader must exist)

## Notes

See implementation plan section "3. Background Monitor" for detailed behavior specification.

