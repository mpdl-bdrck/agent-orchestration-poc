# PNP-007: Create background_monitor() Async Function

**Status**: ðŸ”´ To Do  
**Phase**: Phase 2 - Background Monitor (Native Messages)  
**Priority**: High  
**Assignee**: TBD

---

## Description

Create the `background_monitor()` async function that monitors for alerts and sends them as Chainlit messages with action buttons.

## Acceptance Criteria

- [ ] Function `background_monitor()` exists in `src/interface/chainlit/handlers.py`
- [ ] Waits 10 seconds for UI initialization before starting
- [ ] Checks `NOTIFICATION_PANEL_ENABLED` feature flag
- [ ] Loads `NotificationLoader` singleton
- [ ] Gets settings from JSON (mode, interval, max_alerts)
- [ ] Supports streaming mode: gets next alert, sends message, waits interval
- [ ] Supports static mode: loads all alerts, sends all at once, waits 5 minutes
- [ ] Supports replay mode: uses delay_seconds from each alert
- [ ] Handles errors gracefully (waits 60s on error, continues running)
- [ ] Logs alert push events for debugging
- [ ] Calls `_send_alert_message()` helper function

## Related Files

- `src/interface/chainlit/handlers.py` (update existing file)

## Dependencies

- PNP-003 (NotificationLoader must exist)
- PNP-009 (Alert message sending function)

## Notes

This function runs continuously in the background, sending alerts as `cl.Message` objects. See implementation plan section "2. Background Monitor" for detailed behavior specification.
