# PNP-018: Implement triggerAgent() JavaScript Function

**Status**: ðŸ”´ To Do  
**Phase**: Phase 4 - Context Injection  
**Priority**: High  
**Assignee**: TBD

---

## Description

Implement the `triggerAgent()` function that simulates user input to trigger agent investigations when cards are clicked.

## Acceptance Criteria

- [ ] Function `window.triggerAgent(agent, context)` exists in `notifications.js`
- [ ] Formats prompt as `SYSTEM_TRIGGER: @{agent} {context}`
- [ ] Finds chat textarea using selector (`textarea#chat-input`)
- [ ] Finds send button using selector (`button[aria-label="Send"]`)
- [ ] Sets textarea value using React-friendly method:
  - [ ] Uses native value setter from prototype
  - [ ] Dispatches input event for React compatibility
- [ ] Simulates send button click after 100ms delay
- [ ] Handles missing elements gracefully (logs error, doesn't crash)
- [ ] Function is globally accessible (window.triggerAgent)

## Related Files

- `public/notifications.js` (update)

## Dependencies

- PNP-006 (Click handler exists)

## Notes

This function bridges the DOM overlay to Chainlit's chat input. Must be React-compatible. See implementation plan section "4. Context Injection" and consultant's plan for details.
